<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script
      async
      src="https://www.googletagmanager.com/gtag/js?id=G-B8LSH945MT"
    ></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());

      gtag("config", "G-B8LSH945MT");
    </script>

    <script
      src="https://code.jquery.com/jquery-3.6.0.slim.min.js"
      integrity="sha256-u7e5khyithlIdTpu22PHhENmPcRdFiHRjhAuHcs05RI="
      crossorigin="anonymous"
    ></script>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
      integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
      crossorigin="anonymous"
    />
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js"
      integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF"
      crossorigin="anonymous"
    ></script>

    <!-- Virtual keypad -->
    <script src="https://cdn.jsdelivr.net/npm/virtual-keypad@latest/dist/main.min.js"></script>

    <link rel="stylesheet" href="../uni.css" />
    <link rel="stylesheet" href="main.css" />

    <link rel="apple-touch-icon" href="../media/apple-touch-icon-blue.png" />
    <link
      rel="shortcut icon"
      href="../media/favicon-blue.ico"
      type="image/x-icon"
    />
    <title>EasyEyes | Virtual Keypad</title>
  </head>
  <body>
    <nav class="navbar navbar-expand-sm navbar-light bg-white">
      <a class="navbar-brand" href="."
        ><img
          class="easyeyes-logo"
          src="../media/easyeyes-blue.svg"
          alt="EasyEyes | Virtual Keypad"
          width="80px"
          height="80px"
      /></a>
      <button
        class="navbar-toggler"
        type="button"
        data-bs-toggle="collapse"
        data-bs-target="#navbarNav"
        aria-controls="navbarNav"
        aria-expanded="false"
        aria-label="Toggle navigation"
      >
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav">
          <li class="nav-item">
            <a class="nav-link" href="../">Home</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="../remote-calibrator/">Calibrator</a>
          </li>
          <li class="nav-item active">
            <a class="nav-link active" href=".">Keypad</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="https://github.com/EasyEyes">GitHub</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="../references.html">References</a>
          </li>
        </ul>
      </div>
    </nav>

    <main>
      <div id="header">
        <h1>Virtual Keypad<span style="color: #4380ff">.</span></h1>
        <p class="description">Respond from any distance.</p>
      </div>

      <section>
        <h2>
          <span style="color: #4380ff">Participants</span> use their mobile
          device as a keypad.
        </h2>
        <p>
          Scanning the QR code takes the user to a keypad, fitted with the
          appropriate buttons and ready to send responses back to the experiment
          application.
        </p>
      </section>
      <section>
        <h2>
          <span style="color: #4380ff">Experimenters</span> customize the
          receiver.
        </h2>
        <p>
          Open communication between the <code>Receiver</code> and
          <code>Keypad</code>
          allows for runtime adjustment of keys, eg updating the response domain
          between trials.
        </p>
      </section>
      <section>
        <div id="qrcode-demo">
          <!-- <iframe
            src="https://www.keypad.website/receiver"
            frameborder="0"
            id="qrcode-demo-iframe"
          ></iframe> -->
        </div>
      </section>
      <section id="start">
        <h2>Getting Started</h2>
        <a href="https://github.com/EasyEyes/virtual-keypad"
          ><img
            alt="GitHub stars"
            src="https://img.shields.io/github/stars/EasyEyes/virtual-keypad?style=flat-square"
        /></a>
        <a href="https://npmjs.org/package/virtual-keypad"
          ><img
            alt="npm version"
            src="https://img.shields.io/npm/v/virtual-keypad.svg?style=flat-square"
        /></a>
        <a href="https://github.com/EasyEyes/virtual-keypad/blob/main/LICENSE"
          ><img
            alt="GitHub license"
            src="https://img.shields.io/github/license/EasyEyes/virtual-keypad?style=flat-square"
        /></a>
        <a href="https://www.jsdelivr.com/package/npm/virtual-keypad"
          ><img
            alt="jsdelivr"
            src="https://data.jsdelivr.com/v1/package/npm/virtual-keypad/badge"
        /></a>
        <p>
          From within an online experiment (such as one created using
          <a href="https://github.com/psychopy/psychojs">PsychoJS</a>
          or <a href="https://lab.js.org">LabJS</a>), initiate a
          <code>Receiver</code> to provide the participant with a unique qr
          code.
        </p>
        <p>
          Use this <code>Receiver</code> object throughout the experiment to
          update keypad parameters or provide messages to the participant.
        </p>
      </section>
    </main>
    <script>
      var receivedData = [];
      let keypad_options = {
        // Specify a 'keypadUrl' field if you really need to redirect to a keypad hosted elsewhere
        alphabet: [..."CDHKNORSVZ".split(""), "ESC", "SPACE"], // Set of symbols to display; array perfered
        font: "Sloan", // Supported font, in which to display letters
        targetElementId: "qrcode-demo", // id of the the div where messages should be displayed
      };
      let ondata_callback = (data) => {
        receivedData.push(data.response);
        const displayPort = document.getElementById("qrcode-demo");
        displayPort.innerText += data.response + ", ";
        if (receivedData.length % 30 == 0) {
          displayPort.innerText += "\n";
        }
        console.log(receivedData);
      };
      var receiver = new virtualKeypad.Receiver(
        keypad_options,
        ondata_callback
      );
    </script>
  </body>
</html>
