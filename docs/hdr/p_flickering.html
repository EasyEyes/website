<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>EasyEyes FlickeringCSF</title>
    <link rel="stylesheet" href="style.css" />
    <script>
      window.resizeTo(1310, 780);
    </script>
  </head>

  <body>
    <div>
      <video
        id="flickering-video"
        controls
        autoplay
        loop
        playsinline
        muted
      ></video>
    </div>
    <h3><span id="message1"></span></h3>
    <p><span id="message3" hidden></span></p>
    <script src="https://cdn.jsdelivr.net/npm/remote-calibrator@latest"></script>
    <script>
      const message1 = document.getElementById("message3");
      const flickering_video = document.getElementById("flickering-video");
      flickering_video.removeAttribute("controls");

      const isHVC1Supported = MediaSource.isTypeSupported(
        'video/mp4; codecs="hvc1"'
      );
      const isAVC1Supported = MediaSource.isTypeSupported(
        'video/mp4; codecs="avc1.6e0033"'
      );
      RemoteCalibrator.init({ id: "session_022" });
      message3.innerHTML =
        " Browser detected: " + RemoteCalibrator.browser.value;
      if (isHVC1Supported == true) {
        flickering_video.src = "FlickeringCSF-PNG/safari_flickering.mp4";
      } else if (isAVC1Supported == true) {
        flickering_video.src = "FlickeringCSF-PNG/chrome_flickering.mp4";
      } else {
        message1.innerHTML =
          "Neither the hvc1 (H.265) nor avc1.6e0033 (H.264) codec is supported by your browser. Please use CHROME or SAFARI ";
      }
    </script>
  </body>
</html>
