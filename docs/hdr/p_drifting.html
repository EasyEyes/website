<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>EasyEyes DriftingCSF</title>
    <link rel="stylesheet" href="style.css" />
    <script>
      window.resizeTo(1310, 780);
    </script>
  </head>

  <body>
    <div>
      <video
        id="drifting-video"
        controls
        autoplay
        loop
        playsinline
        muted
      ></video>
    </div>
    <h3><span id="message1"></span></h3>
    <p><span id="message3" hidden></span></p>
    <script src="https://cdn.jsdelivr.net/npm/remote-calibrator@latest"></script>
    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js"
    integrity="sha512-U6K1YLIFUWcvuw5ucmMtT9HH4t0uz3M366qrF5y4vnyH6dgDzndlcGvH/Lz5k8NFh80SN95aJ5rqGZEdaQZ7ZQ=="
    crossorigin="anonymous" referrerpolicy="no-referrer"></script> -->
    <script>
      var vids = $("video");
      $.each(vids, function () {
        this.controls = false;
      });
    </script>
    <script>
      const message1 = document.getElementById("message3");
      const drifting_video = document.getElementById("drifting-video");

      const isHVC1Supported = MediaSource.isTypeSupported(
        'video/mp4; codecs="hvc1"'
      );
      const isAVC1Supported = MediaSource.isTypeSupported(
        'video/mp4; codecs="avc1.6e0033"'
      );
      RemoteCalibrator.init({ id: "session_022" });
      message3.innerHTML =
        " Browser detected: " + RemoteCalibrator.browser.value;
      if (isHVC1Supported == true) {
        drifting_video.src = "DriftingCSF-PNG/safari_drifting.mp4";
      } else if (isAVC1Supported == true) {
        drifting_video.src = "DriftingCSF-PNG/chrome_drifting.mp4";
      } else {
        message1.innerHTML =
          "Neither the hvc1 (H.265) nor avc1.6e0033 (H.264) codec is supported by your browser. Please use CHROME or SAFARI ";
      }
      drifting_video.removeAttribute("controls");
    </script>
  </body>
</html>
